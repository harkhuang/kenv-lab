# Redis集群性能测试报告

**测试时间:** 2025年 07月 27日 星期日 21:04:20 CST
**集群节点:** 7001 7002 7003
**测试请求数:** 100000
**数据大小:** 64 bytes

## 测试环境
- CPU: 8 核心
- 内存: 14Gi
- Redis版本: v=7.2.10

## 单节点性能测试结果

| 节点 | 客户端数 | 操作类型 | QPS | 平均延迟(ms) |
|------|----------|----------|-----|-------------|
| 7001 | 1 | set | ERROR | ERROR |
| 7001 | 1 | get | ERROR | ERROR |
| 7001 | 1 | incr | ERROR | ERROR |
| 7001 | 10 | set | ERROR | ERROR |
| 7001 | 10 | get | ERROR | ERROR |
| 7001 | 10 | incr | ERROR | ERROR |
| 7001 | 50 | set | ERROR | ERROR |
| 7001 | 50 | get | ERROR | ERROR |
| 7001 | 50 | incr | ERROR | ERROR |
| 7001 | 100 | set | ERROR | ERROR |
| 7001 | 100 | get | ERROR | ERROR |
| 7001 | 100 | incr | ERROR | ERROR |
| 7002 | 1 | set | ERROR | ERROR |
| 7002 | 1 | get | ERROR | ERROR |
| 7002 | 1 | incr | 11603.62 | 0.081 |
| 7002 | 10 | set | ERROR | ERROR |
| 7002 | 10 | get | ERROR | ERROR |
| 7002 | 10 | incr | 164203.61 | 0.043 |
| 7002 | 50 | set | ERROR | ERROR |
| 7002 | 50 | get | ERROR | ERROR |
| 7002 | 50 | incr | 185528.77 | 0.169 |
| 7002 | 100 | set | ERROR | ERROR |
| 7002 | 100 | get | ERROR | ERROR |
| 7002 | 100 | incr | 178890.88 | 0.320 |
| 7003 | 1 | set | 11502.19 | 0.082 |
| 7003 | 1 | get | 18875.05 | 0.049 |
| 7003 | 1 | incr | ERROR | ERROR |
| 7003 | 10 | set | 163132.14 | 0.045 |
| 7003 | 10 | get | 172413.80 | 0.037 |
| 7003 | 10 | incr | ERROR | ERROR |
| 7003 | 50 | set | 177619.89 | 0.185 |
| 7003 | 50 | get | 186915.88 | 0.142 |
| 7003 | 50 | incr | ERROR | ERROR |
| 7003 | 100 | set | 179533.22 | 0.345 |
| 7003 | 100 | get | 175131.36 | 0.304 |
| 7003 | 100 | incr | ERROR | ERROR |

## 集群性能测试结果

| 客户端数 | 操作类型 | 总QPS | 平均延迟(ms) | 备注 |
|----------|----------|-------|-------------|------|
| 1 | set | 9241.29 | 0.100 | 集群模式 |
| 1 | get | 19011.41 | 0.048 | 集群模式 |
| 1 | mixed | 11088.93 | 0.084 | 集群模式 |
| 10 | set | 199600.80 | 0.033 | 集群模式 |
| 10 | get | 200000.00 | 0.035 | 集群模式 |
| 10 | mixed | 200000.00 | 0.026 | 集群模式 |
| 50 | set | 199600.80 | 0.086 | 集群模式 |
| 50 | get | 400000.00 | 0.071 | 集群模式 |
| 50 | mixed | 199600.80 | 0.084 | 集群模式 |
| 100 | set | 398406.41 | 0.133 | 集群模式 |
| 100 | get | 199600.80 | 0.173 | 集群模式 |
| 100 | mixed | 199600.80 | 0.147 | 集群模式 |

## 性能优化建议

### C++客户端优化建议
1. **连接池管理**: 使用连接池避免频繁建立连接
2. **集群感知**: 使用支持集群的客户端库(如redis-plus-plus)
3. **异步操作**: 使用异步I/O提升并发性能
4. **批量操作**: 使用pipeline和批量命令
5. **错误处理**: 正确处理MOVED/ASK重定向

### 集群优化建议
1. **分片策略**: 优化key分布避免热点
2. **网络优化**: 确保节点间低延迟
3. **监控告警**: 监控集群状态和性能指标
4. **故障恢复**: 建立完善的故障恢复机制

